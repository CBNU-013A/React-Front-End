# HTTPS 설정 및 로그인 상태 유지 가이드

## 개발 서버 실행 방법

### HTTP 서버 (기본 - 백엔드가 HTTP인 경우)
```bash
npm run dev
```
- `http://localhost:5173`으로 접속

### HTTPS 서버 (백엔드도 HTTPS인 경우)
```bash
# 1. SSL 인증서 생성
npm run generate-cert

# 2. HTTPS 개발 서버 실행
npm run dev:https
```
- `https://localhost:5173`으로 접속
- 자체 서명 인증서 경고가 나타나면 "고급" → "localhost로 이동(안전하지 않음)" 클릭

## 로그인 상태 유지 기능

### 주요 개선사항

1. **자동 토큰 갱신**
   - 로그인 후 백그라운드에서 토큰 자동 갱신
   - 토큰 만료 시 자동으로 새 토큰 발급 시도

2. **오프라인 모드 지원**
   - 네트워크 연결이 불안정할 때도 로그인 상태 유지
   - 서버 연결 실패 시 토큰 유효성 검증 건너뛰기

3. **안정적인 상태 복원**
   - 페이지 새로고침 시에도 로그인 상태 유지
   - 브라우저 재시작 후에도 로그인 상태 복원

4. **보안 강화**
   - HTTPS 통신으로 데이터 암호화
   - 토큰 기반 인증으로 보안성 향상

### 사용법

1. **개발 서버 시작**
   ```bash
   # 백엔드가 HTTP인 경우 (기본)
   npm run dev
   
   # 백엔드가 HTTPS인 경우
   npm run dev:https
   ```

2. **로그인**
   - 정상적으로 로그인하면 토큰이 자동으로 저장됨
   - 페이지를 새로고침해도 로그인 상태 유지

3. **토큰 관리**
   - 토큰은 자동으로 갱신됨
   - 수동으로 로그아웃하지 않는 한 로그인 상태 유지

### 주의사항

1. **자체 서명 인증서**
   - 개발용으로만 사용
   - 프로덕션 환경에서는 유효한 SSL 인증서 사용 필요

2. **백엔드 서버**
   - 백엔드 서버가 HTTP인 경우: `http://localhost:8001`로 접근 가능해야 함
   - 백엔드 서버가 HTTPS인 경우: `https://localhost:8001`로 접근 가능해야 함
   - 프론트엔드와 백엔드의 프로토콜이 일치해야 함 (HTTP ↔ HTTP, HTTPS ↔ HTTPS)

3. **브라우저 설정**
   - 일부 브라우저에서 자체 서명 인증서 경고 표시
   - 개발 환경에서만 "안전하지 않음" 경고 무시

### 문제 해결

1. **인증서 오류**
   ```bash
   # 인증서 재생성
   rm localhost-key.pem localhost.pem
   npm run generate-cert
   ```

2. **포트 충돌**
   - `vite.config.js`에서 포트 번호 변경 가능

3. **연결 실패**
   - 백엔드 서버가 실행 중인지 확인
   - 프론트엔드와 백엔드의 프로토콜이 일치하는지 확인 (HTTP ↔ HTTP, HTTPS ↔ HTTPS)
   - 방화벽 설정 확인
